{% assign heading = 'Tambi√©n recomendamos' %}
<div class="product-cart-recomendations">
        <div id="title">
                <h2>{{ 'cart.general.product_recomendations_title' | t }}</h2>
            </div>
            <ul class="related-products">
                {% for prod in collections.all.products %}
                    {% for item in cart.items %}
                  {%comment%}
                    prod.tags: {{prod.tags}}
                    <br>
                    item.product.tags:{{item.product.tags}}
                    <br>
                    {%endcomment%}
            
                    {%assign is_related = false%}
            
                    {%for prod_tag in prod.tags%}
            
                    {% if item.product.tags contains prod_tag %} 
                    {%assign is_related = true%}
                    {%endif%}
            
                    {%endfor%}
                 
                 
            
                
                        {% if is_related %} 
                
                <br>
                 
                            <li class="related-item {{ prod.handle }}" style="display:none">
                                <h3 class="name">
                                    <a href="{{ prod.url }}" title="{{ prod.title | escape }}">{{ prod.title }}</a>
                                </h3>
                                <div class="price">
                                    <a href="{{ prod.url }}" title="{{ prod.title | escape }}">{{ prod.price | money }}</a>
                                </div>
                                
                                <div class="image">            
                                    <a href="{{ prod.url | within: collection }}" title="{{ product.title | escape }}">{{ prod.featured_image | product_img_url: image_size | img_tag }}</a>
                                </div>
                                
                                <div class="copy">
                                    {{ prod.description | strip_html | truncatewords: 15 }}
                                </div>
                                <div class="more"><a href="{{ prod.url }}" title="{{ prod.title | escape }}">View</a></div>
                                <div class="clear"></div>
                            </li>
                        {% endif %}
                    {% endfor %}
                {% endfor %}
                </ul>
</div>

    
<script>
    var Total_item = $("li.related-item").length, // Total number of raltaed item to choose from
        item_toshow = 3, // total items to show in your cart page
        array = [], // array with index number of all available items
        shuffle = [], // array with shuffled index number
        rnd;

        console.log('total_item'+ Total_item);
    
    for (i = 0; i < Total_item; i++) {
      array[i] = i;
    }
    
    for (i = 0; i < Total_item; i++) { // pick numbers
      rnd = Math.floor(Math.random() * array.length); 
      shuffle[i] = array.splice(rnd,1)[0]; // remove the selected number from the array and get it in another variable
    }
    
    for (i = 0; i < item_toshow; i++){
        $("li.related-item").slice(shuffle[i],shuffle[i]+1).show();
    }
        
</script>