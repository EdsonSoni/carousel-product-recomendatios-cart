
{%comment%}
<div class="">
        <div id="title">
                <h2>{{ 'cart.general.product_recomendations_title' | t }}</h2>
            </div>
            <ul class="">
                {% for prod in collections.all.products %}
                product: {{prod.title}}
                <br>
                    {% for item in cart.items %}
                    item: {{item.title}}
             <br>
                    {%assign is_related = false%}
            
                    {%for prod_tag in prod.tags%}
            
                    {% if item.product.tags contains prod_tag %} 
                    {%assign is_related = true%}
                    {%endif%}
            
                    {%endfor%}
                 
                 
            
                
                        {% if is_related %} 
                
                <br>
            
                        {% endif %}
                    {% endfor %}
                    _______________
                    <br>
                {% endfor %}
                </ul>
</div>
{%endcomment%}





<div class="product-cart-recomendations">
        <div id="title">
                <h2>{{ 'cart.general.product_recomendations_title' | t }}</h2>
            </div>
        <div class="carousel js-carousel">
                <div class="carousel__container js-carousel-container">
                        <div class="carousel__nav">
                                <button class="carousel__button--prev js-carousel-button" data-dir="prev">&lt;</button>
                                <button class="carousel__button--next js-carousel-button" data-dir="next">&gt;</button>
                            </div>
                    <div class="carousel__list js-carousel-list" data-displayed-items="6">
                            {% for prod in collections.all.products %}
                            
                            {% for item in cart.items %}
                            {%assign is_related = false%}
                    
                            {%for prod_tag in prod.tags%}
                    
                            {% if item.product.tags contains prod_tag and item.product.handle != prod.handle %} 
                        
                            {%assign is_related = true%}
                          
                            {%endif%}
                    
                            {%endfor%}
                                {% if is_related %} 
                        
                        <br>

              
                         {%include 'product-recomend-item', prod: prod%}
                        

                    
                         
                                {% endif %}
                            {% endfor %}
                        {% endfor %}
                    </div>
                </div>
              
            </div>
</div>





    
<script>
    
    var Total_item = $("div.item-related").length, // Total number of raltaed item to choose from
        item_toshow = 6, // total items to show in your cart page
        array = [], // array with index number of all available items
        shuffle = [], // array with shuffled index number
        rnd;

        console.log('total_item'+ Total_item);
    
    for (i = 0; i < Total_item; i++) {
      array[i] = i;
    }
    
    for (i = 0; i < Total_item; i++) { // pick numbers
      rnd = Math.floor(Math.random() * array.length); 
      shuffle[i] = array.splice(rnd,1)[0]; // remove the selected number from the array and get it in another variable
    }
    
    for (i = 0; i < item_toshow; i++){
     
        $("div.item-related").slice(shuffle[i],shuffle[i]+1).show();
    }
  
        
</script>
